# Как пользоваться проектом

0. **Заполните `config/packages.txt`.** По одному пакету в строке, без версий. Комментарии допускаются (# …).  
   При необходимости добавьте бинарные фиды в `config/feeds.txt` (например, `src/gz custom https://example.com/openwrt/packages`). Формат строк совпадает с `repositories.conf` ImageBuilder; пустые строки и комментарии игнорируются.  
   ⚠ ImageBuilder умеет работать только с бинарными `src/gz` фидами. Строки `src-git …` будут пропущены с предупреждением — для них нужно опубликовать заранее собранный репозиторий пакетов.
1. `make build` – соберёт docker‑образ builder и запустит сборку. Готовые артефакты окажутся в `output/`.
2. `make clean` (опционально) – удалит каталог `output/`, если нужно начать заново.
   Каталог `files/` используется как overlay для файловой системы образа и автоматически подмонтируется в ImageBuilder; в процессе сборки туда загружается `growpart` из `https://github.com/canonical/cloud-utils`. Добавляйте собственные файлы в `files/` (каталог gitignore'ится по умолчанию), чтобы они оказались в образе.

### Параметры (env)
| Переменная       | Значение по‑умолчанию | Описание |
|------------------|----------------------|----------|
| `OPENWRT_RELEASE`| `24.10.1`            | релиз OpenWrt |
| `TARGET`         | `x86`                | архитектура (см. targets/) |
| `SUBTARGET`      | `64`                 | под‑арх. |
| `PROFILE`        | `generic`            | профиль устройства |
| `ROOTFS_SIZE`    | `512`                | размер `/dev/sda2` в MiB |
